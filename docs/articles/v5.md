<div id="main" role="main">

# Version 5

There are a number of new features brought by version 5 of echarts.js,
not all are showcased here, see the [official
changelog](https://github.com/apache/echarts/releases/tag/5.0.0) for
more information.

<div class="section level2">

## Dark mode

Darkmode helps when using dark backgrounds, it’ll automatically re-color
labels, grid lines, legend text, etc.

<div id="cb1" class="sourceCode">

``` r
library(echarts4r)

e_charts(mtcars, qsec, darkMode = TRUE) |> 
  e_scatter(mpg, wt) |> 
  e_labels() |> 
  e_color(background = "black")
```

</div>

<div id="htmlwidget-ac96cb3ee4656e2e9ec3"
class="echarts4r html-widget html-fill-item"
style="width:100%;height:500px;">

</div>

</div>

<div class="section level2">

## Aria Decal

Decal provides a new visual type that does not only augment aria
scenarios but also enrich visual effects.

<div id="cb2" class="sourceCode">

``` r
df <- data.frame(
  x = rep(letters, 2),
  y = round(runif(52, 20, 50)),
  grp = rep(c("A", "B"), each = 26)
)

df |> 
  group_by(grp) |> 
  e_charts(x) |> 
  e_bar(y) |> 
  e_aria(enabled = TRUE, decal = list(show = TRUE))
```

</div>

<div id="htmlwidget-e5c8c404fe174e4c81bd"
class="echarts4r html-widget html-fill-item"
style="width:100%;height:500px;">

</div>

</div>

<div class="section level2">

## Rounded Corners

<div id="cb3" class="sourceCode">

``` r
head(df, 7) |> 
  e_charts(x) |> 
  e_pie(
    y,
    radius = c("40%", "70%"),
    itemStyle = list(
      borderRadius = 20,
      borderColor = '#fff',
      borderWidth = 2
    )
  )
```

</div>

<div id="htmlwidget-36aa3d2a04d42bbc2145"
class="echarts4r html-widget html-fill-item"
style="width:100%;height:500px;">

</div>

</div>

<div class="section level2">

## Datazoom Enhancements

Visual improvements to the datazoom feature.

<div id="cb4" class="sourceCode">

``` r
e_charts(mtcars, qsec) |> 
  e_scatter(mpg, wt) |>
  e_datazoom(startValue = 14)
```

</div>

<div id="htmlwidget-febe03efa1a2d8d52a86"
class="echarts4r html-widget html-fill-item"
style="width:100%;height:500px;">

</div>

</div>

<div class="section level2">

## Labels

Many improvements to labels were added.

<div id="cb5" class="sourceCode">

``` r
mtcars |>
  tibble::rownames_to_column("model") |> 
  e_charts(model) |> 
  e_bar(
    mpg,
    label = list(
      formatter = '{c} {name|{a}}',
      show = TRUE,
      rotate = 90,
      align = "left",
      verticalAlign = "middle",
      position = "insideBottom",
      rich = list(name = list())
    )
  )
```

</div>

<div id="htmlwidget-1fb4450895fe099f74a1"
class="echarts4r html-widget html-fill-item"
style="width:100%;height:500px;">

</div>

There are also new options such as `labelLine` and `labelLayout`.

<div id="cb6" class="sourceCode">

``` r
e_charts(mtcars, mpg) |> 
  e_scatter(
    qsec,
    wt,
    label = list(
      show = TRUE
    ),
    labelLayout = list(
      x = "95%",
      moveOverlap = "shiftY"
    ),
    labelLine = list(
      show = TRUE,
      lineStyle = list(
        color = "gray"
      )
    ),
    emphasis = list(
      focus = "self"
    )
  ) |> 
  e_x_axis(min = 9)
```

</div>

<div id="htmlwidget-10b3b7155e8045a1b2ad"
class="echarts4r html-widget html-fill-item"
style="width:100%;height:500px;">

</div>

</div>

<div class="section level2">

## Emphasis

More control on `emphasis` which was previously rarely if ever useful.

<div id="cb7" class="sourceCode">

``` r
df <- data.frame(
  grp = rep(c("a", "b"), each = 7),
  x = rep(letters[1:7], 2),
  y = runif(14, 1, 10)
)

df |> 
  group_by(grp) |> 
  e_charts(x) |> 
  e_bar(y, emphasis = list(focus = "series"))
```

</div>

<div id="htmlwidget-4018eef1a407a0df6b52"
class="echarts4r html-widget html-fill-item"
style="width:100%;height:500px;">

</div>

</div>

<div class="section level2">

## SVG Map

<div id="cb8" class="sourceCode">

``` r
url <- "https://echarts.apache.org/examples/data/asset/geo/Beef_cuts_France.svg"

svg <- url |> 
  readLines() |> 
  paste0(collapse = "")
```

</div>

    ## Warning in readLines(url): incomplete final line found on
    ## 'https://echarts.apache.org/examples/data/asset/geo/Beef_cuts_France.svg'

<div id="cb10" class="sourceCode">

``` r
data <- tibble::tibble(
  name = c(
    "Queue", 
    "Langue",
    "Plat de joue",
    "Collier",
    "Rumsteck",
    "Plat de joue",
    "Onglet",
    "Plat de tranche",
    "Araignée",
    "Gîte à la noix",
    "Bavette d'aloyau",
    "Tende de tranche",
    "Rond de gîte",
    "Plat de côtes",
    "Bavette",
    "Basses côtes",
    "Jumeau à biftek",
    "Jumeau à pot-au-feu",
    "Paleron",
    "Macreuse à bifteck",
    "Macreuse à pot-au-feu",
    "Tendron Milieu de poitrine",
    "Flanchet",
    "Bavettede de flanchet",
    "Hampe",
    "Filet",
    "Aiguillette baronne",
    "Côtes Entrecôtes",
    "Faux-filet",
    "Gîte",
    "Gros bout de poitrine"
  ),
  value = runif(31, 10, 15)
)

data |> 
  e_charts(name) |> 
  e_svg_register("beef", svg) |> 
  e_svg(
    value,
    map = "beef",
    label = list(
      show = FALSE
    )
  ) |> 
  e_visual_map(
    value,
    orient = "horizontal"
  )
```

</div>

<div id="htmlwidget-5b1b2f4ad92281566982"
class="echarts4r html-widget html-fill-item"
style="width:100%;height:500px;">

</div>

</div>

</div>
